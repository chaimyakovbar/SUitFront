import{l as de,r as a,R as W,j as e,B as p,ah as xe,ai as ue,aj as pe,T as f,n as c,s as F,t as I,v as M,b as B,x as E,ag as N,ak as he,al as fe,N as me}from"./mui-1756666373213.js";import{C as ge,P as be,O as je,u as ye,a as ve,b as Ce}from"./three-1756666373213.js";import{G as Se,u as ke,H as O,I as J,J as q,y as we}from"./index-1756666373213.js";import{c as ze,u as Pe}from"./utils-1756666373213.js";import"./vendor-1756666373213.js";import"./animations-1756666373213.js";const De=()=>{const t={};return O.forEach(d=>{const s=J.find(h=>h.id===d.id);t[d.id]=s?s.category:d.name}),t},R=De(),Te=t=>{const d=a.useRef(),{scene:s}=ye("/models/bane_male.glb",!0),h=W.useMemo(()=>{const m=s.clone();return m.traverse(i=>{i.isMesh&&i.material&&(Array.isArray(i.material)?i.material.forEach(n=>{n.color.setHex(5396048),n.emissive.setHex(0),n.roughness=.9,n.metalness=.05}):(i.material.color.setHex(5396048),i.material.emissive.setHex(0),i.material.roughness=.9,i.material.metalness=.05))}),m},[s]);return e.jsx("primitive",{ref:d,object:h,dispose:null,scale:[1,1,1],...t})},Ne=()=>{var U;const t=de("(max-width:600px)"),[d]=ze(we),{data:s,isLoading:h}=Se(),m=Pe(),{enqueueSnackbar:i}=ke(),[n,j]=a.useState({}),[y,C]=a.useState(!1),[g,S]=a.useState(null),[v,b]=a.useState(null),[x,P]=a.useState(null),[Q,H]=a.useState(""),[Z,X]=a.useState([]),[L,ee]=a.useState(!1),[te,oe]=a.useState(!1),[u,k]=a.useState(null),[D,T]=a.useState([]),[w,$]=a.useState(""),[re,z]=a.useState(!1);a.useEffect(()=>{window.scrollTo(0,0)},[]),a.useEffect(()=>{if(!(s!=null&&s.sizes))return;const o=Object.entries(s.sizes).reduce((r,[l,A])=>{if(l.startsWith("profile_")){const ce=l.replace("profile_","");r.push({name:ce,sizes:A||{}})}return r},[]);if(T(o),o.length===0){const r={name:"Default",sizes:{}};T([r]),k(r),j({})}else u||(k(o[0]),j(o[0].sizes||{}))},[s]),a.useEffect(()=>{if(!u||!(s!=null&&s.sizes))return;const o=`profile_${u.name}`,r=s.sizes[o]||{};j(r)},[u,s]);const se=async()=>{if(!w.trim()){i("Please enter a profile name",{variant:"error"});return}const o={name:w.trim(),sizes:{}};try{const r={...s==null?void 0:s.sizes,[`profile_${w.trim()}`]:o.sizes};await q({email:d.email,sizes:r}),T([...D,o]),k(o),$(""),z(!1),i("New profile created successfully",{variant:"success"})}catch(r){console.error("Error creating new profile:",r),i("Failed to create new profile",{variant:"error"})}},Y=(o,r)=>{u&&j(l=>({...l,[o]:r}))},ie=async o=>{if(o.preventDefault(),!u){i("Please select a profile first");return}try{const r={...(s==null?void 0:s.sizes)||{},[`profile_${u.name}`]:n};await q({email:d.email,sizes:r}),C(!1),P(null),i("Measurements saved successfully")}catch(r){console.error("Error saving measurements:",r),i("Error saving measurements")}},V=()=>{ee(!L)},_=W.useMemo(()=>!u||!n?[]:O.filter(o=>{const r=R[o.id],l=n[r];return l&&l.toString().trim()!==""&&Number(l)>0}).map(o=>o.id),[u,n]);W.useEffect(()=>{!h&&(s!=null&&s.sizes)&&Object.keys(n).length===0&&j(s.sizes)},[h,s,n]);const ne=o=>{P(o);const r=R[o.id],l=(n==null?void 0:n[r])||"";H(l||""),C(!0)},le=()=>{C(!1),P(null)},G=()=>{S(null),b(null)},K=(o,r)=>{S(o),b(r)},ae=o=>{X(r=>r.includes(o)?r.filter(l=>l!==o):[o])};return te?e.jsxs("div",{style:{textAlign:"center",padding:"20px",color:"#fff",backgroundColor:"#000",minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsx("h2",{children:"Error loading 3D model"}),e.jsx("p",{children:"Please try refreshing the page"}),e.jsx(p,{onClick:()=>window.location.reload(),variant:"contained",style:{marginTop:"20px"},children:"Refresh Page"})]}):e.jsxs("div",{style:{maxHeight:"100vh",overflow:"hidden",background:"linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 30%, #0f0f0f 70%, #0a0a0a 100%)",color:"#C0D3CA"},children:[e.jsxs("div",{style:{position:"absolute",left:"20px",top:"120px",zIndex:100},children:[e.jsxs("div",{style:{display:t?"grid":"flex",gap:t?"2px":"10px",width:t?"130px":"100%"},children:[e.jsxs(p,{onClick:()=>m("/indexSizes"),style:{color:"#fff",backgroundColor:"#333","&:hover":{backgroundColor:"#444"}},children:[e.jsx(xe,{style:{marginRight:"8px"}}),"Back"]}),e.jsxs(p,{onClick:V,style:{color:"#fff",backgroundColor:"#333","&:hover":{backgroundColor:"#444"}},children:[e.jsx(ue,{style:{marginRight:"8px"}}),"All Sizes"]}),e.jsxs(p,{onClick:()=>m("/Shopping"),style:{color:"#fff",backgroundColor:"#333","&:hover":{backgroundColor:"#444"}},children:[e.jsx(pe,{style:{marginRight:"8px"}}),"Shopping"]})]}),e.jsx("div",{children:e.jsxs(f,{variant:"body2",children:[_.length,"/","15"," measurements completed"]})})]}),e.jsx("div",{style:{position:"absolute",right:"20px",top:"120px",zIndex:100},children:e.jsxs(c,{sx:{display:t?"grid":"flex",gap:t?"2px":"10px",alignItems:"center",width:t?"70px":"100%"},children:[e.jsx(p,{variant:"contained",onClick:()=>z(!0),style:{backgroundColor:"#333",color:"#fff","&:hover":{backgroundColor:"#444"}},children:"New Profile"}),e.jsx("select",{value:(u==null?void 0:u.name)||"",onChange:o=>{const r=D.find(l=>l.name===o.target.value);k(r)},style:{backgroundColor:"#333",color:"#fff",padding:"8px",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.3)"},children:D.map(o=>e.jsx("option",{value:o.name,children:o.name},o.name))}),e.jsx(f,{variant:"body5",sx:{color:"white"},children:"Select Profile:"})]})}),e.jsxs(F,{open:re,onClose:()=>z(!1),PaperProps:{style:{backgroundColor:"#1e1e1e",color:"#fff"}},children:[e.jsx(I,{children:"Create New Size Profile"}),e.jsx(M,{children:e.jsx(B,{autoFocus:!0,margin:"dense",label:"Profile Name",type:"text",fullWidth:!0,variant:"outlined",value:w,onChange:o=>$(o.target.value),sx:{"& .MuiOutlinedInput-root":{color:"#fff","& fieldset":{borderColor:"rgba(255, 255, 255, 0.23)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.5)"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"}}})}),e.jsxs(E,{children:[e.jsx(p,{onClick:()=>z(!1),sx:{color:"#fff"},children:"Cancel"}),e.jsx(p,{onClick:se,variant:"contained",sx:{backgroundColor:"#333"},children:"Create"})]})]}),e.jsxs("div",{style:{marginTop:"100px"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx("div",{style:{marginTop:"70px",width:"100%",height:"150vh"},children:e.jsxs(ge,{shadows:!0,onError:()=>oe(!0),style:{background:"#000000"},children:[e.jsx(be,{makeDefault:!0,position:[10,20,20]}),e.jsx("ambientLight",{intensity:3}),e.jsx("directionalLight",{position:[10,10,5],intensity:4,castShadow:!0,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048}),e.jsx("directionalLight",{position:[-10,10,-5],intensity:3,color:"#ffffff"}),e.jsx("pointLight",{position:[0,15,0],intensity:2.5,color:"#ffffff"}),e.jsx("pointLight",{position:[0,0,10],intensity:2,color:"#ffffff"}),e.jsx("pointLight",{position:[0,0,-10],intensity:2,color:"#ffffff"}),e.jsxs("mesh",{position:[0,0,0],children:[e.jsx("sphereGeometry",{args:[.5,16,16]}),e.jsx("meshStandardMaterial",{color:"red"})]}),e.jsx(je,{enableZoom:!1,enablePan:!1,enableRotate:!0,minDistance:1,maxDistance:100,minPolarAngle:0,maxPolarAngle:Math.PI}),e.jsx(a.Suspense,{fallback:e.jsxs("mesh",{children:[e.jsx("boxGeometry",{args:[1,1,1]}),e.jsx("meshStandardMaterial",{color:"gray"})]}),children:e.jsx(Te,{position:[10,30,10],color:"red"})}),e.jsx(Ae,{onButtonClick:ne,onPointClick:ae,activePoints:Z,completedPoints:_})]})}),e.jsxs(F,{open:y,onClose:le,keepMounted:!0,children:[e.jsx(I,{sx:{backgroundColor:"#F5F5F7",fontWeight:"bold"},children:x?x.label:"Button Info"}),e.jsx(M,{sx:{backgroundColor:"#F5F5F7",padding:t?"15px":"30px",display:"flex",justifyContent:"center",alignItems:"center",minWidth:t?"250px":"300px"},children:x?e.jsxs(c,{sx:{padding:t?"10px":"20px",width:"100%",maxWidth:t?"250px":"300px"},children:[e.jsx(c,{sx:{display:"flex",alignItems:"center",mb:t?2:3},children:e.jsx(B,{type:"number",label:"Enter measurement (cm)",value:Q,onChange:o=>{const r=o.target.value;H(r);const l=R[x.id];Y(l,r)},variant:"outlined",fullWidth:!0,size:t?"small":"medium"})}),e.jsx(c,{sx:{mb:t?1:2,display:"flex",justifyContent:"center"},children:e.jsx("img",{src:x.img,alt:x.title,style:{width:"100%",height:t?"100px":"150px",objectFit:"contain"}})}),e.jsxs(c,{sx:{gap:"10px",display:"flex",justifyContent:"center",boxShadow:3,borderRadius:"12px",width:"90%",height:t?"80px":"100px",margin:"0 auto"},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs(f,{variant:t?"body2":"subtitle1",sx:{marginBottom:t?"4px":"8px",color:"black",fontSize:t?"0.8rem":"inherit"},children:["Video",e.jsx("br",{}),"Explanation"]}),e.jsx(N,{title:"Click to watch video",placement:"top",children:e.jsx(p,{variant:"outlined",onClick:()=>K("YouTube",x.video),size:t?"small":"medium",sx:{borderColor:"#ff0000",minWidth:t?"40px":"auto",height:t?"32px":"auto","&:hover":{borderColor:"#cc0000",backgroundColor:"rgba(255, 0, 0, 0.04)"}},children:e.jsx(he,{sx:{color:"red",fontSize:t?"1.2rem":"inherit"}})})})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs(f,{variant:t?"body2":"subtitle1",sx:{marginBottom:t?"4px":"8px",color:"black",fontSize:t?"0.8rem":"inherit"},children:["Text",e.jsx("br",{}),"Explanation"]}),e.jsx(N,{title:"Click to read instructions",placement:"top",children:e.jsx(p,{variant:"outlined",onClick:()=>K("Text",x.explain),size:t?"small":"medium",sx:{minWidth:t?"40px":"auto",height:t?"32px":"auto","&:hover":{borderColor:"#1557b0",backgroundColor:"rgba(26, 115, 232, 0.04)"}},children:e.jsx(fe,{sx:{color:"#1a73e8",fontSize:t?"1.2rem":"inherit"}})})})]})]})]}):e.jsx("p",{children:"No button selected"})}),e.jsx(E,{sx:{backgroundColor:"#F5F5F7",padding:"10px 24px"},children:e.jsx(p,{onClick:ie,color:"primary",variant:"outlined",children:"Save"})})]}),e.jsxs(F,{open:!!g,onClose:G,maxWidth:t?"xs":"md",fullWidth:!0,PaperProps:{sx:{minHeight:t?"40vh":"50vh",maxHeight:"90vh",backgroundColor:"#f5f5f7",margin:t?"16px":"auto"}},children:[e.jsx(I,{sx:{textAlign:"center",fontSize:t?"1.2rem":"1.5rem",fontWeight:"bold",borderBottom:"1px solid #e0e0e0",backgroundColor:"#fff",padding:t?"16px":"24px"},children:g==="YouTube"?"Video Tutorial":x!=null&&x.label?`Measurement Instructions - ${x.label}`:"Measurement Instructions"}),e.jsx(M,{children:g==="YouTube"?e.jsxs(c,{sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",gap:2,py:2},children:[e.jsx(f,{variant:t?"subtitle1":"h6",sx:{fontWeight:"bold",color:"#333",fontSize:t?"1rem":"inherit",textAlign:"center"},children:"Watch the tutorial video"}),e.jsx("video",{controls:!0,autoPlay:!0,style:{width:"100%",maxHeight:t?"50vh":"70vh",objectFit:"contain",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},src:v,children:"Your browser does not support the video tag."})]}):e.jsx(c,{sx:{padding:t?2:3,"& p":{marginBottom:t?1:2,fontSize:t?"0.9rem":"1.1rem",lineHeight:1.6},"& ul":{marginBottom:t?1:2,paddingLeft:t?2:3},"& li":{marginBottom:t?.5:1,fontSize:t?"0.9rem":"1.1rem",lineHeight:1.6}},children:(U=v==null?void 0:v.split(`
`))==null?void 0:U.map((o,r)=>o.trim().startsWith("step")||/^\d+\./.test(o.trim())?e.jsx(f,{variant:t?"subtitle1":"h6",sx:{fontWeight:"bold",color:"#1a73e8",marginTop:t?1:2,marginBottom:t?.5:1,fontSize:t?"1rem":"inherit"},children:o.trim()},`step-${r}-${o.trim().substring(0,10)}`):o.trim()?e.jsx(f,{sx:{marginBottom:t?.5:1,color:"#333",fontSize:t?"0.9rem":"inherit"},children:o.trim()},`text-${r}-${o.trim().substring(0,10)}`):null)})}),e.jsx(E,{sx:{borderTop:"1px solid #e0e0e0",padding:t?1:2,backgroundColor:"#fff"},children:e.jsx(p,{onClick:G,variant:"contained",size:t?"small":"medium",sx:{backgroundColor:"#1a73e8",color:"#fff",fontSize:t?"0.9rem":"inherit","&:hover":{backgroundColor:"#1557b0"}},children:"Close"})})]})]}),e.jsx(me,{style:{zIndex:20001},anchor:"right",open:L,onClose:V,PaperProps:{sx:{width:"75vw"}},children:e.jsxs(c,{sx:{width:t?"270px":"400px",p:t?1:3,backgroundColor:"#f5f5f5"},children:[e.jsx(f,{variant:"h5",sx:{mb:t?1:3,textAlign:"center",fontWeight:"bold",fontSize:t?"1.2rem":"1.5rem"},children:"All Measurements"}),e.jsx(c,{sx:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:t?1:2,maxHeight:"80vh",overflowY:"auto",padding:t?"5px":"10px"},children:J.map(o=>{const r=(n==null?void 0:n[o.category])||"",l=r&&r.toString().trim()!==""&&Number(r)>0;return e.jsxs(c,{sx:{display:"flex",flexDirection:"column",p:t?1:2,borderRadius:2,bgcolor:l?"rgba(76, 175, 80, 0.1)":"rgba(255, 235, 235, 0.5)",border:"1px solid",borderColor:l?"success.light":"error.light",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:2}},children:[e.jsx(f,{variant:"subtitle1",sx:{mb:t?.5:1,fontWeight:"bold",fontSize:t?"0.9rem":"1rem"},children:o.label}),e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(B,{type:"number",size:"small",value:r,onChange:A=>Y(o.category,A.target.value),sx:{width:t?"80px":"100px","& .MuiOutlinedInput-root":{backgroundColor:"white",height:t?"32px":"40px"}},InputProps:{endAdornment:e.jsx(f,{variant:"body2",sx:{fontSize:t?"0.75rem":"0.875rem"},children:"cm"})}}),l&&e.jsx(c,{sx:{color:"success.main"},children:"âœ“"})]})]},o.id)})}),e.jsx(c,{sx:{mt:t?1:3,display:"flex",justifyContent:"center",gap:t?1:2,borderTop:"1px solid #ddd",paddingTop:t?1:2}})]})})]})]})},Ae=({onButtonClick:t,onPointClick:d,activePoints:s,completedPoints:h})=>{const{camera:m}=ve();return e.jsx(e.Fragment,{children:O.map(i=>{const n=`button-${i.id}`;return e.jsx(N,{title:i.label,children:e.jsx(Fe,{button:i,camera:m,onClick:()=>t(i),onPointClick:()=>d(i.id),isActive:s.includes(i.id),isCompleted:h.includes(i.id)})},n)})})},Fe=({button:t,camera:d,onClick:s,onPointClick:h,isActive:m,isCompleted:i})=>{const{position:n,size:j}=t,y=a.useRef(),[C,g]=a.useState(!1);Ce(()=>{y.current&&(y.current.position.set(...n),y.current.lookAt(d.position))});const S=i?"#0d930d":m?"#3399FF":C?"#FF6666":"#FF4C4C",v=j*1.5;return e.jsxs("mesh",{ref:y,onClick:b=>{b.stopPropagation(),s(),h()},onPointerOver:()=>g(!0),onPointerOut:()=>g(!1),onPointerDown:b=>{b.stopPropagation(),g(!0)},onPointerUp:b=>{b.stopPropagation(),g(!1)},children:[e.jsx("circleGeometry",{args:[v,32]}),e.jsx("meshStandardMaterial",{color:S})]})};export{Ne as default};
