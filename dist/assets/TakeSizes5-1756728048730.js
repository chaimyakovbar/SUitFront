const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Doll3D-1756728048730.js","assets/mui-1756728048730.js","assets/vendor-1756728048730.js","assets/three-1756728048730.js"])))=>i.map(i=>d[i]);
import{C as ae,P as ce,O as de,a as xe,_ as R,b as ue}from"./three-1756728048730.js";import{l as pe,r as n,R as k,j as e,B as c,ah as he,ai as fe,aj as ge,T as j,n as d,s as E,t as F,v as z,b as M,x as I,ag as _,ak as me,al as je,N as ye}from"./mui-1756728048730.js";import{u as Ce,L as N,M as O}from"./index-1756728048730.js";import{u as be}from"./utils-1756728048730.js";import"./vendor-1756728048730.js";import"./animations-1756728048730.js";const ve=()=>{const t={};return N.forEach(l=>{const x=O.find(u=>u.id===l.id);t[l.id]=x?x.category:l.name}),t},T=ve(),Se=k.lazy(()=>R(()=>import("./Doll3D-1756728048730.js"),__vite__mapDeps([0,1,2,3])).then(t=>({default:t.Doll}))),ke=k.lazy(()=>R(()=>import("./Doll3D-1756728048730.js"),__vite__mapDeps([0,1,2,3])).then(t=>({default:t.Doll2}))),Q=({modelType:t,...l})=>{const[x,u]=n.useState(!1),[a,s]=n.useState(!1);return n.useEffect(()=>{(async()=>{try{t==="suit"&&await R(()=>import("./Doll3D-1756728048730.js"),__vite__mapDeps([0,1,2,3])),u(!0)}catch(g){console.error("Failed to load 3D model:",g),s(!0)}})()},[t]),a?e.jsxs("mesh",{children:[e.jsx("boxGeometry",{args:[1,1,1]}),e.jsx("meshStandardMaterial",{color:"red"})]}):x?t==="suit"?e.jsx(Se,{...l}):e.jsx(ke,{...l}):e.jsxs("mesh",{children:[e.jsx("boxGeometry",{args:[1,1,1]}),e.jsx("meshStandardMaterial",{color:"gray"})]})},Te=()=>{const t=pe("(max-width:600px)"),l=null,x=!1,u=be(),{enqueueSnackbar:a}=Ce(),[s,y]=n.useState({}),[g,h]=n.useState(!1),[C,m]=n.useState(null),[w,b]=n.useState(null),[f,P]=n.useState(null),[J,A]=n.useState(""),[K,U]=n.useState([]),[B,X]=n.useState(!1),[Z,ee]=n.useState(!1),[p,L]=n.useState(null),[D,te]=n.useState([]),[v,W]=n.useState(""),[re,S]=n.useState(!1);n.useEffect(()=>{},[l]),n.useEffect(()=>{},[p,l]);const oe=async()=>{if(!v.trim()){a("Please enter a profile name",{variant:"error"});return}const r={name:v.trim(),sizes:{}};try{const o={...l==null?void 0:l.sizes,[`profile_${v.trim()}`]:r.sizes};te([...D,r]),L(r),W(""),S(!1),a("New profile created successfully",{variant:"success"})}catch(o){console.error("Error creating new profile:",o),a("Failed to create new profile",{variant:"error"})}},V=(r,o)=>{p&&y(i=>({...i,[r]:o}))},G=async r=>{if(r.preventDefault(),!p){a("Please select a profile first");return}try{const o={...(l==null?void 0:l.sizes)||{},[`profile_${p.name}`]:s};h(!1),P(null),a("Measurements saved successfully")}catch(o){console.error("Error saving measurements:",o),a("Error saving measurements")}},H=()=>{X(!B)},Y=k.useMemo(()=>!p||!s?[]:N.filter(r=>{const o=T[r.id],i=s[o];return i&&i.toString().trim()!==""&&Number(i)>0}).map(r=>r.id),[p,s]);k.useEffect(()=>{},[x,l,s]);const se=r=>{P(r);const o=T[r.id],i=(s==null?void 0:s[o])||"";A(i||""),h(!0)},ne=()=>{h(!1),P(null)},$=()=>{m(null),b(null)},q=(r,o)=>{m(r),b(o)},le=r=>{U(o=>o.includes(r)?o.filter(i=>i!==r):[r])};return Z?e.jsxs("div",{style:{textAlign:"center",padding:"20px",color:"#fff",backgroundColor:"#000",minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsx("h2",{children:"Error loading 3D model"}),e.jsx("p",{children:"Please try refreshing the page"}),e.jsx(c,{onClick:()=>window.location.reload(),variant:"contained",style:{marginTop:"20px"},children:"Refresh Page"})]}):e.jsxs("div",{children:[e.jsxs("div",{style:{position:"absolute",left:"20px",top:"120px",zIndex:100},children:[e.jsxs("div",{style:{display:t?"grid":"flex",gap:t?"2px":"10px",width:t?"130px":"100%"},children:[e.jsxs(c,{onClick:()=>u("/indexSizes"),style:{color:"#fff",backgroundColor:"#333","&:hover":{backgroundColor:"#444"}},children:[e.jsx(he,{style:{marginRight:"8px"}}),"Back"]}),e.jsxs(c,{onClick:H,style:{color:"#fff",backgroundColor:"#333","&:hover":{backgroundColor:"#444"}},children:[e.jsx(fe,{style:{marginRight:"8px"}}),"All Sizes"]}),e.jsxs(c,{onClick:()=>u("/Shopping"),style:{color:"#fff",backgroundColor:"#333","&:hover":{backgroundColor:"#444"}},children:[e.jsx(ge,{style:{marginRight:"8px"}}),"Shopping"]})]}),e.jsx("div",{children:e.jsxs(j,{variant:"body2",children:[Y.length,"/",O.length," measurements completed"]})})]}),e.jsx("div",{style:{position:"absolute",right:"20px",top:"120px",zIndex:100},children:e.jsxs(d,{sx:{display:t?"grid":"flex",gap:t?"2px":"10px",alignItems:"center",width:t?"70px":"100%"},children:[e.jsx(c,{variant:"contained",onClick:()=>S(!0),style:{backgroundColor:"#333",color:"#fff","&:hover":{backgroundColor:"#444"}},children:"New Profile"}),e.jsx("select",{value:(p==null?void 0:p.name)||"",onChange:r=>{const o=D.find(i=>i.name===r.target.value);L(o)},style:{backgroundColor:"#333",color:"#fff",padding:"8px",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.3)"},children:D.map(r=>e.jsx("option",{value:r.name,children:r.name},r.name))}),e.jsx(j,{variant:"body2",sx:{color:"black"},children:"Select Profile:"})]})}),e.jsxs(E,{open:re,onClose:()=>S(!1),PaperProps:{style:{backgroundColor:"#1e1e1e",color:"#fff"}},children:[e.jsx(F,{children:"Create New Size Profile"}),e.jsx(z,{children:e.jsx(M,{autoFocus:!0,margin:"dense",label:"Profile Name",type:"text",fullWidth:!0,variant:"outlined",value:v,onChange:r=>W(r.target.value),sx:{"& .MuiOutlinedInput-root":{color:"#fff","& fieldset":{borderColor:"rgba(255, 255, 255, 0.23)"},"&:hover fieldset":{borderColor:"rgba(255, 255, 255, 0.5)"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)"}}})}),e.jsxs(I,{children:[e.jsx(c,{onClick:()=>S(!1),sx:{color:"#fff"},children:"Cancel"}),e.jsx(c,{onClick:oe,variant:"contained",sx:{backgroundColor:"#333"},children:"Create"})]})]}),e.jsxs("div",{style:{marginTop:"100px"},children:[e.jsxs("div",{style:{position:"relative"},children:[e.jsx("div",{style:{marginTop:"70px",width:"100%",height:"150vh"},children:e.jsxs(ae,{shadows:!0,onError:()=>ee(!0),children:[e.jsx(ce,{makeDefault:!0,position:[10,20,30]}),e.jsx("ambientLight",{intensity:.5}),e.jsx(de,{}),e.jsxs(n.Suspense,{fallback:e.jsxs("mesh",{children:[e.jsx("boxGeometry",{args:[1,1,1]}),e.jsx("meshStandardMaterial",{color:"gray"})]}),children:[e.jsx(Q,{modelType:"suit",position:[0,5,0],color:"red"}),e.jsx(Q,{modelType:"allSuit",position:[10,5,0],color:"blue"})]}),e.jsx(we,{onButtonClick:se,onPointClick:le,activePoints:K,completedPoints:Y}),e.jsx("gridHelper",{args:[10,10]})]})}),e.jsxs(E,{open:g,onClose:ne,keepMounted:!0,children:[e.jsx(F,{sx:{backgroundColor:"#F5F5F7",fontWeight:"bold"},children:f?f.label:"Button Info"}),e.jsx(z,{sx:{backgroundColor:"#F5F5F7",padding:"30px",display:"flex",justifyContent:"center",alignItems:"center",minWidth:"300px"},children:f?e.jsxs(d,{sx:{padding:"20px",width:"100%",maxWidth:"300px"},children:[e.jsx(d,{sx:{display:"flex",alignItems:"center",mb:3},children:e.jsx(M,{type:"number",label:"Enter measurement (cm)",value:J,onChange:r=>{const o=r.target.value;A(o);const i=T[f.id];V(i,o)},variant:"outlined",fullWidth:!0})}),e.jsx(d,{sx:{mb:2,display:"flex",justifyContent:"center"},children:e.jsx("img",{src:f.img,alt:f.title,style:{width:"100%",height:"150px",objectFit:"contain"}})}),e.jsxs(d,{sx:{display:"flex",justifyContent:"center",boxShadow:3,borderRadius:"12px",width:"70%",margin:"0 auto"},children:[e.jsx(_,{title:"Click to watch",placement:"top",children:e.jsx(c,{onClick:()=>q("YouTube",f.video),children:e.jsx(me,{sx:{color:"red"}})})}),e.jsx(_,{title:"Click for detailed explanation",placement:"top",children:e.jsx(c,{onClick:()=>q("Error",f.explain),children:e.jsx(je,{})})})]})]}):e.jsx("p",{children:"No button selected"})}),e.jsx(I,{sx:{backgroundColor:"#F5F5F7",padding:"10px 24px"},children:e.jsx(c,{onClick:G,color:"primary",variant:"outlined",children:"Save"})})]}),e.jsxs(E,{open:!!C,onClose:$,children:[e.jsx(F,{children:C}),e.jsx(z,{children:e.jsx(d,{padding:2,children:w})}),e.jsx(I,{children:e.jsx(c,{onClick:$,children:"Close"})})]})]}),e.jsx(ye,{style:{zIndex:20001,width:"50vw"},anchor:"right",open:B,onClose:H,children:e.jsxs(d,{sx:{width:t?"270px":"400px",p:t?1:3,backgroundColor:"#f5f5f5"},children:[e.jsx(j,{variant:"h5",sx:{mb:t?1:3,textAlign:"center",fontWeight:"bold",fontSize:t?"1.2rem":"1.5rem"},children:"כל המידות"}),e.jsx(d,{sx:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:t?1:2,maxHeight:"80vh",overflowY:"auto",padding:t?"5px":"10px"},children:O.map(r=>{const o=(s==null?void 0:s[r.category])||"",i=o&&o.toString().trim()!==""&&Number(o)>0;return e.jsxs(d,{sx:{display:"flex",flexDirection:"column",p:t?1:2,borderRadius:2,bgcolor:i?"rgba(76, 175, 80, 0.1)":"rgba(255, 235, 235, 0.5)",border:"1px solid",borderColor:i?"success.light":"error.light",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:2}},children:[e.jsx(j,{variant:"subtitle1",sx:{mb:t?.5:1,fontWeight:"bold",fontSize:t?"0.9rem":"1rem"},children:r.label}),e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(M,{type:"number",size:"small",value:o,onChange:ie=>V(r.category,ie.target.value),sx:{width:t?"80px":"100px","& .MuiOutlinedInput-root":{backgroundColor:"white",height:t?"32px":"40px"}},InputProps:{endAdornment:e.jsx(j,{variant:"body2",sx:{fontSize:t?"0.75rem":"0.875rem"},children:"cm"})}}),i&&e.jsx(d,{sx:{color:"success.main"},children:"✓"})]})]},r.id)})}),e.jsx(d,{sx:{mt:t?1:3,display:"flex",justifyContent:"center",gap:t?1:2,borderTop:"1px solid #ddd",paddingTop:t?1:2},children:e.jsx(c,{variant:"contained",color:"primary",fullWidth:!0,onClick:G,sx:{py:t?1:1.5,fontWeight:"bold",fontSize:t?"0.9rem":"1.1rem"},children:"שמור את כל המידות"})})]})})]})]})},we=({onButtonClick:t,onPointClick:l,activePoints:x,completedPoints:u})=>{const{camera:a}=xe();return e.jsx(e.Fragment,{children:N.map(s=>e.jsx(_,{title:s.label,children:e.jsx(Pe,{button:s,camera:a,onClick:()=>t(s),onPointClick:()=>l(s.id),isActive:x.includes(s.id),isCompleted:u.includes(s.id)})},s.id))})},Pe=({button:t,camera:l,onClick:x,onPointClick:u,isActive:a,isCompleted:s})=>{const{position:y,size:g}=t,h=n.useRef(),[C,m]=n.useState(!1);ue(()=>{h.current&&(h.current.position.set(...y),h.current.lookAt(l.position))});const w=s?"#66FF66":a?"#3399FF":C?"#FF6666":"#FF4C4C";return e.jsxs("mesh",{ref:h,onClick:b=>{b.stopPropagation(),x(),u()},onPointerOver:()=>m(!0),onPointerOut:()=>m(!1),children:[e.jsx("circleGeometry",{args:[g,32]}),e.jsx("meshStandardMaterial",{color:w})]})};export{Te as default};
